---
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import FormattedDate from "../../components/FormattedDate.astro";
import { getPosts } from "../../data/posts";

const title = "Blog";
const description = title;
const posts = await getPosts();
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
    <style></style>
  </head>
  <body>
    <Header />
    <main>
      <div class="content-column">
        <h1>{title}</h1>

        <p>
          Subscribe to my <a class="sage-link" href="/feed.xml">RSS feed</a>
          to stay up to date with my posts.
        </p>

        <!-- <h2>Browse by tag</h2>

        {
          posts
            .map((post) => {
              return post.data.tags.join(" | ");
            })
            .join(" ||| ")
        }
 -->
        <!-- <ul class="tag-list">
  {% for tag in collections.all | getAllTags | sort | filterTagList %}
  <li>
    <a href="/blog/tags/{{ tag }}/" class="sage-link">{{ tag | prettyTag }}</a>
  </li>
  {% endfor %}
</ul> -->

        <h2>All posts</h2>

        <div class="post-list">
          <!-- {% for post in collections.posts | reverse %} -->
          {
            posts.map((post) => {
              return (
                <section class="post-list--post sage-well">
                  <h3>
                    <a class="sage-link no-underline" href={post.slug}>
                      {post.data.title}
                    </a>
                  </h3>
                  <FormattedDate date={post.data.pubDate} />

                  <p>{post.data.description}</p>
                </section>
              );
            })
          }
        </div>
      </div>
    </main>
    <Footer />
  </body>
</html>
